---
layout: page
title: Advanced Signals
permalink: /afsig/
---

<link rel="stylesheet" href="/lib/public/global-training.css">

## The environment should begin to load immediately. Please do not click *Start Lab* again. It may take a few minutes for the Fusion environment to fully display.

When the Fusion Login page displays, login:

* USERNAME: ```admin```
* PASSWORD: ```password123```

# In this lab you will learn how to use aggregated signals, how to apply and analyze signal boosting. Let's get started!

> Note: You may need to adjust the size of the instructions panel to fully view results in the UI. Toggle the window sizes as needed.

#  Inspect Aggregated Signals

1. In the Fusion Admin UI, click **Electronics** to access the app

2. Navigate to **Collections Manager**

3. Change collection: **Electronics_signals_aggr**

4. In the App tool menu, hover over QUERYING and click **Query Workbench**

> Notice that no result turn up and you see an API Error. That is because the Apply Rules stage is interfering with the data.

5. Click on the green circle to turn the <u>Apply Rules</u> stage **off**

  <img src="https://storage.googleapis.com/fusion-datasets/5.4_Markdown_images/02%20AF/Boosting%20With%20Signals_5/Boosting_with_Signals1.png" style="height: 355px; width:450px;"/>

<br>

>You will see the error still, but we now have results. This will work for the purposes of this lab. In production, you would want to set up a custom pipeline before ingestion.

6. Click Show Fields on any document

   * The fields <u>doc_id_s</u> and query_s record the original query entered by the user(s), along with which document they ultimately clicked (query_s shows when given specific query)

    * <u>aggr_count_i</u> records how many times this specific query (“fax machine”) led to a click on this document (1)

    * <u>weight_d</u> indicates how much to promote this document in response to this query

7.  Execute a query for: ``doc_id_s: 2842056``

8. Click: **Add a field facet** 

9. Choose: **query_s**

   * This query and facet show all of the user queries that led to a click on this document

   * We would need to examine individual documents to see the click-count and weight for each case.


<img src="https://storage.googleapis.com/fusion-datasets/5.4_Markdown_images/02%20AF/Boosting%20With%20Signals_5/Boosting_with_Signals2.png" style="height: 225px; width:440px;"/>

<br>

10. Navigate to **Collections Manager**

11. Change collection: **Electronics**

> **Note:** You may leave without saving 

12. In the App tool menu, select: **QUERYING > Query Workbench**

# Applying Signal Boosting

13. Execute query for:  ``ipad``

    * Review the results


<img src="https://storage.googleapis.com/fusion-datasets/5.4_Markdown_images/02%20AF/Boosting%20With%20Signals_5/Boosting_with_Signals3.png" style="height: 275px; width:450px;"/>

<br>

14. Click on the circle to turn the <u>Boost with Signals</u> stage **off**

    * Review the results. These results are terrible. There may not even be any ipads in the results

# Analyzing Signal Boosting

15. In Query Workbench, change View As: to **Debug**

16. Observe the **explain** section

This section provides a full description of how the relevancy score for each results document was calculated.  At present, with signal boosting disabled, this is based solely on TF*IDF

<img src="https://storage.googleapis.com/fusion-datasets/5.4_Markdown_images/02%20AF/Boosting%20With%20Signals_5/Boosting_with_Signals5.png" style="height: 349px; width:625px;"/>

<br>

17. **Re-enable** Boost with Signals stage (click to add green circle)

18. Observe debug output

    * First, notice that parsedquery became MUCH more complex due to the added boosting.

    * The doc ids you see in the boosted query were generated by first executing the same user query (“ipad”) on the Labs_signals_aggr collection, and collecting the top-weighted results

    * Second, notice that the relevance explain became more complex as well.  Now there is a Signal Boosting factor in addition to the TF*IDF factors.

    * In the example below, the final score for this document (20.69) was produced by similarly-scaled factors for TF*IDF (6.77) and Signals (3.05).  One did not overpower the other—a very good thing!

<img src="https://storage.googleapis.com/fusion-datasets/5.4_Markdown_images/02%20AF/Boosting%20With%20Signals_5/Boosting_with_Signals4.png" style="height: 184px; width:512px;"/>

<br>


19. Click to open **Boost with Signals** pipeline stage

20. Scroll down until you see **Solr Query Parameters**

The Solr Query Parameters govern how Fusion should locate and prioritize the signals related to a given query, as well as how the Signals-score should be combined with the standard TF*IDF score

When implementing Signal Boosting in a Fusion App, all of these parameters can and should be tuned to suit your specific use cases.

  <img src="https://storage.googleapis.com/fusion-datasets/5.4_Markdown_images/02%20AF/Boosting%20With%20Signals_5/Boosting_with_Signals6.png" style="height: 480px; width:380px;"/>
  
 <br>

_____

## Congratulations! You should now know to use aggregated signals, and how to apply and analyze signal boosting. If you would like to save your Fusion App to reference later, you can do it now:

1. Return to the Fusion Launcher
2. Hover over your app and click on the cog that appears in the lower right corner
3. Within the box that opens, click **Export app to zip**

